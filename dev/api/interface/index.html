<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Interfacing Functions · MQTTClient.jl</title><meta name="title" content="Interfacing Functions · MQTTClient.jl"/><meta property="og:title" content="Interfacing Functions · MQTTClient.jl"/><meta property="twitter:title" content="Interfacing Functions · MQTTClient.jl"/><meta name="description" content="Documentation for MQTTClient.jl."/><meta property="og:description" content="Documentation for MQTTClient.jl."/><meta property="twitter:description" content="Documentation for MQTTClient.jl."/><meta property="og:url" content="https://JuliaMessaging.github.io/MQTTClient.jl/api/interface/"/><meta property="twitter:url" content="https://JuliaMessaging.github.io/MQTTClient.jl/api/interface/"/><link rel="canonical" href="https://JuliaMessaging.github.io/MQTTClient.jl/api/interface/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">MQTTClient.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../getting-started/">Getting Started</a></li><li><a class="tocitem" href="../../interfaces/">MQTT Interface Functions</a></li><li><a class="tocitem" href="../../client/">MQTT Client</a></li><li><span class="tocitem">MQTT API</span><ul><li><a class="tocitem" href="../client/">Client</a></li><li class="is-active"><a class="tocitem" href>Interfacing Functions</a></li></ul></li><li><a class="tocitem" href="../../utils/">Utils</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">MQTT API</a></li><li class="is-active"><a href>Interfacing Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Interfacing Functions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/main/docs/src/api/interface.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.MakeConnection" href="#MQTTClient.MakeConnection"><code>MQTTClient.MakeConnection</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MakeConnection(host::Union{IPAddr, String}, port::Int64;
               ping_timeout=UInt64(60),
               keep_alive::Int64=32,
               client_id::String=randstring(8),
               user::User=User(&quot;&quot;, &quot;&quot;),
               will::Message=Message(false, 0x00, false, &quot;&quot;, UInt8[]),
               clean_session::Bool=true)::Tuple

MakeConnection(path::String;
               ping_timeout=UInt64(60),
               keep_alive::Int64=32,
               client_id::String=randstring(8),
               user::User=User(&quot;&quot;, &quot;&quot;),
               will::Message=Message(false, 0x00, false, &quot;&quot;, UInt8[]),
               clean_session::Bool=true)::Tuple</code></pre><p>Creates an MQTT client connection to an MQTT broker, handling the construction of both the <code>Client</code> and <code>Connection</code> objects inside the <code>Configuration</code> struct. This function provides flexible ways to specify the connection details either through a TCP connection with host and port, a Unix Domain Socket path.</p><p><strong>Arguments</strong></p><ul><li><code>host::Union{IPAddr, String}</code>: The IP address or hostname of the MQTT broker.</li><li><code>port::Int64</code>: The port number to connect to.</li><li><code>path::String</code>: The file system path for Unix Domain Socket connection.</li><li><code>io::T</code>: An object of subtype <code>AbstractIOConnection</code>.</li><li><code>ping_timeout::UInt64</code>: The ping timeout in seconds (default: 60).</li><li><code>keep_alive::Int64</code>: The keep-alive time in seconds (default: 32).</li><li><code>client_id::String</code>: The client identifier (default: a random string of length 8).</li><li><code>user::User</code>: The user credentials for the MQTT broker (default: anonymous user).</li><li><code>will::Message</code>: The last will message to be sent in case of unexpected disconnection (default: an empty will message).</li><li><code>clean_session::Bool</code>: Indicates whether to start a clean session (default: true).</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Configuration</code> struct where <code>client::Client</code> is the MQTT client instance and <code>connection::Connection</code> is the connection information used to connect to the broker.</li></ul><p>This function simplifies the process of setting up an MQTT client connection. Depending on the type of connection, you can specify the broker&#39;s IP address and port or a Unix Domain Socket path, it infers the Protocol and then constructs the necessary provided or default parameters. Refer to the documentation for <a href="../client/#MQTTClient.Client"><code>Client</code></a> and <a href="../client/#MQTTClient.Connection"><code>Connection</code></a> object.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Example with IP address and port
client, connection = MakeConnection(&quot;127.0.0.1&quot;, 1883; client_id=&quot;mqtt_client_1&quot;)

# Example with Unix Domain Socket path
client, connection = MakeConnection(&quot;/var/run/mqtt.sock&quot;; user=User(&quot;user&quot;, &quot;pass&quot;))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L1-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.connect_async" href="#MQTTClient.connect_async"><code>MQTTClient.connect_async</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">connect_async(client::Client, connection::Connection)</code></pre><p>Establishes an asynchronous connection to the MQTT broker using the provided <code>Client</code> and <code>Connection</code> objects. This function initializes the client, establishes the connection, and starts the necessary loops for communication.</p><p><strong>Arguments</strong></p><ul><li><code>client::Client</code>: The MQTT client instance.</li><li><code>connection::Connection</code>: The connection information used to connect to the broker.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>Future</code> object that can be used to await the completion of the connection process.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">client, connection = MakeConnection(&quot;127.0.0.1&quot;, 1883; client_id=&quot;mqtt_client_1&quot;)
future = connect_async(client, connection)
wait(future)</code></pre><p><strong>See Also</strong></p><ul><li><a href="#Sockets.connect"><code>connect</code></a>: The synchronous version of this function.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L91-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Sockets.connect" href="#Sockets.connect"><code>Sockets.connect</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">connect(protocol::UDS)::PipeEndpoint</code></pre><p>Establishes a connection to a Unix domain socket at the given path specified in the <code>UDS</code> struct.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/connection.jl#L59-L63">source</a></section><section><div><pre><code class="language-julia hljs">connect(protocol::TCP)::TCPSocket</code></pre><p>Establishes a TCP connection to the given IP address and port specified in the <code>TCP</code> struct.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/connection.jl#L65-L69">source</a></section><section><div><pre><code class="language-julia hljs">connect(client::Client, connection::Connection)</code></pre><p>Establishes a synchronous connection to the MQTT broker using the provided <a href="../client/#MQTTClient.Client"><code>Client</code></a> and <a href="../client/#MQTTClient.Connection"><code>Connection</code></a> objects. This function wraps <a href="#MQTTClient.connect_async"><code>connect_async</code></a> and waits for the connection process to complete.</p><p><strong>Arguments</strong></p><ul><li><code>client::Client</code>: The MQTT client instance.</li><li><code>connection::Connection</code>: The connection information used to connect to the broker.</li></ul><p><strong>Returns</strong></p><ul><li>The result of the connection process after it completes.</li></ul><p>The connect function is responsible for establishing a connection between an MQTT client and an MQTT broker. It initializes the client&#39;s state, sets up the necessary communication channels, and handles the connection handshake according to the MQTT protocol. When called, connect first ensures that the client&#39;s state and resources are properly initialized. This includes resetting the client&#39;s state, setting up the socket connection, and creating the channels and locks required for communication. The function then starts the asynchronous tasks needed to manage the read, write, and keep-alive loops, which are crucial for maintaining the connection and ensuring that messages are sent and received properly.</p><p>Additionally, the connect function handles the specifics of the MQTT protocol handshake. It constructs and sends the CONNECT packet, including details such as the client ID, user credentials, and optional will message. This handshake process ensures that the broker recognizes the client and sets up the session according to the specified parameters. The synchronous connect function blocks until the connection process is complete, providing a straightforward way to establish the connection without needing to manage asynchronous operations directly. This makes it suitable for applications that require a simple, blocking call to connect to the broker and start communicating immediately.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">client, connection = MakeConnection(&quot;127.0.0.1&quot;, 1883; client_id=&quot;mqtt_client_1&quot;)
result = connect(client, connection)</code></pre><p><strong>See Also</strong></p><ul><li><a href="#MQTTClient.connect_async"><code>connect_async</code></a>: The asynchronous version of this function.</li><li><a href="../client/#MQTTClient.Client"><code>Client</code></a></li><li><a href="../client/#MQTTClient.Connection"><code>Connection</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L196-L226">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.disconnect" href="#MQTTClient.disconnect"><code>MQTTClient.disconnect</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">disconnect(client::Client)</code></pre><p>Disconnects the client from the broker and stops the tasks.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L229-L233">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.subscribe_async" href="#MQTTClient.subscribe_async"><code>MQTTClient.subscribe_async</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subscribe_async(client::Client, topic::String, on_msg::Function; qos::UInt8=QOS_0)</code></pre><p>Subscribe to a topic asynchronously.</p><p><strong>Arguments</strong></p><ul><li><code>client::Client</code>: The MQTT client.</li><li><code>topic::String</code>: The topic to subscribe to.</li><li><code>on_msg::Function</code>: The function to call when a message is received on the topic.</li><li><code>qos::UInt8</code>: The quality of service level to use for the subscription. Default is 0.</li></ul><p><strong>Returns</strong></p><ul><li><code>Future</code>: A future that can be used to wait for the subscription to complete.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">future = subscribe_async(client, &quot;my/topic&quot;, on_msg; qos=QOS_2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L261-L282">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.subscribe" href="#MQTTClient.subscribe"><code>MQTTClient.subscribe</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subscribe(client::Client, topic::String, on_msg::Function; qos::UInt8=QOS_0)</code></pre><p>Subscribe to a topic.</p><p><strong>Arguments</strong></p><ul><li><code>client::Client</code>: The MQTT client.</li><li><code>topic::String</code>: The topic to subscribe to.</li><li><code>on_msg::Function</code>: The function to call when a message is received on the topic.</li><li><code>qos::UInt8</code>: The quality of service level to use for the subscription. Default is 0.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">subscribe(client, &quot;my/topic&quot;, on_msg)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L293-L310">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.unsubscribe_async" href="#MQTTClient.unsubscribe_async"><code>MQTTClient.unsubscribe_async</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unsubscribe_async(client::Client, topics::String...)</code></pre><p>Unsubscribes the <code>Client</code> instance from the supplied topic names. Deletes the callback from the client Returns a <code>Future</code> object that contains <code>nothing</code> on success and an exception on failure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L314-L320">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.unsubscribe" href="#MQTTClient.unsubscribe"><code>MQTTClient.unsubscribe</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unsubscribe(client::Client, topics::String...)</code></pre><p>Unsubscribes the <code>Client</code> instance from the supplied topic names. Waits until the unsubscribe is fully acknowledged. Returns <code>nothing</code> on success and an exception on failure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L338-L343">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.publish_async" href="#MQTTClient.publish_async"><code>MQTTClient.publish_async</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>publish_async(client::Client, message::Message)</p><p>Publishes the message. Returns a <code>Future</code> object that contains <code>nothing</code> on success and an exception on failure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L347-L351">source</a></section><section><div><pre><code class="language-julia hljs">publish_async(client::Client, topic::String, payload...;
   dup::Bool=false,
   qos::QOS=QOS_0,
   retain::Bool=false)</code></pre><p>Pulishes a message with the specified parameters. Returns a <code>Future</code> object that contains <code>nothing</code> on success and an exception on failure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L371-L378">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MQTTClient.publish" href="#MQTTClient.publish"><code>MQTTClient.publish</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>publish(client::Client, topic::String, payload...; dup::Bool=false, qos::QOS=QOS_0, retain::Bool=false)</p><p>Waits until the publish is completely acknowledged. Publishes a message with the specified parameters. Returns <code>nothign</code> on success and throws an exception on failure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaMessaging/MQTTClient.jl/blob/3c0376673e5ba57bbb660f6af6efdb0aab247b72/src/interface.jl#L388-L395">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../client/">« Client</a><a class="docs-footer-nextpage" href="../../utils/">Utils »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Saturday 8 March 2025 22:20">Saturday 8 March 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
